"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw c}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}!function(){var e=regeneratorRuntime.mark(r),t=function(){function e(t){_classCallCheck(this,e),this.fail=null,this.next={},this.end=!1,this.depth=t||0}return _createClass(e,[{key:"insert",value:function(t){var r,n=this,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;c in n.next||(n.next[c]=new e(n.depth+1)),n=n.next[c]}}catch(e){a.e(e)}finally{a.f()}n.end=!0}},{key:"build",value:function(){var e=[];this.fail=this;for(var t=0,r=Object.values(this.next);t<r.length;t++){var n=r[t];n.fail=this,e.push([this,n])}for(;0!=e.length;)for(var a=_slicedToArray(e.shift(),2),c=a[0],o=a[1],i=0,l=Object.entries(o.next);i<l.length;i++){for(var s=_slicedToArray(l[i],2),u=s[0],f=s[1],d=c.fail;d!=this&&!(u in d.next);)d=d.fail;u in d.next&&(d=d.next[u]),f.fail=d,e.push([o,f])}}},{key:"match",value:function(e,t){for(var r=this,n=t||0;n<e.length;n++){for(var a=e[n];r!=this&&!(a in r.next);)r=r.fail;if(a in r.next&&(r=r.next[a]),r.end)return[n-r.depth+1,n+1]}return[-1,-1]}},{key:"matchAll",value:function(e){for(var t=[],r=0;;){var n=_slicedToArray(this.match(e,r),2),a=n[0],c=n[1];if(-1===a)break;t.push([a,c]),r=c}return t}}]),e}();function r(r,n){var a,c,o,i,l,s,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(a=new Set(n.split(/\s+/g).filter((function(e){return 0!==e.length})).map((function(e){return e.toLowerCase()})))).size){e.next=3;break}return e.abrupt("return",!1);case 3:c=new t,o=_createForOfIteratorHelper(a);try{for(o.s();!(i=o.n()).done;)l=i.value,c.insert(l)}catch(e){o.e(e)}finally{o.f()}c.build(),s=_createForOfIteratorHelper(r),e.prev=8,f=regeneratorRuntime.mark((function e(){var t,r,n,o,i,l,s,f,d,h,p,m,y,v,b,x,_,k,g,A,C,T,w,S,E,H,I,O,L,F,M,q,N,R,G,P,j,B,Z,W,z,D,U,Y,$,J,K,Q,V,X,ee,te,re,ne,ae,ce,oe,ie,le,se,ue,fe,de,he,pe,me,ye,ve,be,xe,_e,ke,ge,Ae,Ce,Te,we,Se,Ee,He,Ie,Oe;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.value,r=t.title.toLowerCase(),n=new Set,o=c.matchAll(r),i=c.matchAll(t.url),l=c.matchAll(t.lowerContent),s=t.tags.map((function(e){return a.has(e)?(n.add(e),[e,!0]):[e,!1]})),f=t.categories.map((function(e){return a.has(e)?(n.add(e),[e,!0]):[e,!1]})),d=_createForOfIteratorHelper(o);try{for(d.s();!(h=d.n()).done;)p=_slicedToArray(h.value,2),m=p[0],y=p[1],n.add(r.slice(m,y))}catch(e){d.e(e)}finally{d.f()}v=_createForOfIteratorHelper(i);try{for(v.s();!(b=v.n()).done;)x=_slicedToArray(b.value,2),_=x[0],k=x[1],n.add(t.url.slice(_,k))}catch(e){v.e(e)}finally{v.f()}g=_createForOfIteratorHelper(l);try{for(g.s();!(A=g.n()).done;)C=_slicedToArray(A.value,2),T=C[0],w=C[1],n.add(t.lowerContent.slice(T,w))}catch(e){g.e(e)}finally{g.f()}S=!0,E=_createForOfIteratorHelper(a),e.prev=16,E.s();case 18:if((H=E.n()).done){e.next=25;break}if(I=H.value,n.has(I)){e.next=23;break}return S=!1,e.abrupt("break",25);case 23:e.next=18;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(16),E.e(e.t0);case 30:return e.prev=30,E.f(),e.finish(30);case 33:if(S){e.next=35;break}return e.abrupt("return","continue");case 35:O=[],L=_createForOfIteratorHelper(l),e.prev=37,L.s();case 39:if((F=L.n()).done){e.next=68;break}M=_slicedToArray(F.value,2),q=M[0],N=M[1],R=q-10,G=N+10,P=!1,j=_createForOfIteratorHelper(O),e.prev=45,j.s();case 47:if((B=j.n()).done){e.next=57;break}if(Z=B.value,!(G>=Z.begin&&R<=Z.end)){e.next=55;break}return Z.begin=Math.min(Z.begin,R),Z.end=Math.max(Z.end,G),Z.marks.push([q,N]),P=!0,e.abrupt("break",57);case 55:e.next=47;break;case 57:e.next=62;break;case 59:e.prev=59,e.t1=e.catch(45),j.e(e.t1);case 62:return e.prev=62,j.f(),e.finish(62);case 65:P||O.push({begin:R,end:G,marks:[[q,N]]});case 66:e.next=39;break;case 68:e.next=73;break;case 70:e.prev=70,e.t2=e.catch(37),L.e(e.t2);case 73:return e.prev=73,L.f(),e.finish(73);case 76:(W=document.createElement("article")).className="post-card",z=document.createElement("a"),W.appendChild(z),z.className="post-link waves-effect",z.href=t.url,(D=document.createElement("h3")).className="post-card-title",W.appendChild(D),U=0,Y=_createForOfIteratorHelper(o);try{for(Y.s();!($=Y.n()).done;)J=_slicedToArray($.value,2),K=J[0],Q=J[1],D.innerHTML+="".concat(t.title.slice(U,K),"<mark>").concat(t.title.slice(K,Q),"</mark>"),U=Q}catch(e){Y.e(e)}finally{Y.f()}for(D.innerHTML+=t.title.slice(U),(V=document.createElement("p")).className="post-card-content",W.appendChild(V),0===O.length&&(V.textContent=t.content.slice(0,64)),O.sort((function(e,t){return e.begin-t.begin})),X=0,ee=O;X<ee.length;X++){(te=ee[X]).marks.sort((function(e,t){return e[0]-t[0]})),re=te.begin,ne=_createForOfIteratorHelper(te.marks);try{for(ne.s();!(ae=ne.n()).done;)ce=_slicedToArray(ae.value,2),oe=ce[0],ie=ce[1],V.innerHTML+="".concat(t.content.slice(re,oe),"<mark>").concat(t.content.slice(oe,ie),"</mark>"),re=ie}catch(e){ne.e(e)}finally{ne.f()}V.innerHTML+="".concat(t.content.slice(re,te.end),"...")}if((le=document.createElement("div")).className="post-info",W.appendChild(le),0!==f.length){(se=document.createElement("span")).className="iconify",se.dataset.icon="mdi:folder",le.appendChild(se),(ue=document.createElement("ul")).className="post-categories",le.appendChild(ue),fe=_createForOfIteratorHelper(f);try{for(fe.s();!(de=fe.n()).done;)he=_slicedToArray(de.value,2),pe=he[0],me=he[1],ye=document.createElement("li"),ue.appendChild(ye),ye.innerHTML=me?'<a href="/categories/'.concat(pe,'"><mark>').concat(pe,"</mark></a>"):'<a href="/categories/'.concat(pe,'">').concat(pe,"</a>")}catch(e){fe.e(e)}finally{fe.f()}}if(0!==s.length){(ve=document.createElement("span")).className="iconify",ve.dataset.icon="mdi:tag",le.appendChild(ve),(be=document.createElement("ul")).className="post-tags",le.appendChild(be),xe=_createForOfIteratorHelper(s);try{for(xe.s();!(_e=xe.n()).done;)ke=_slicedToArray(_e.value,2),ge=ke[0],Ae=ke[1],Ce=document.createElement("li"),be.appendChild(Ce),Ce.innerHTML=Ae?'<a class="chip waves-effect" href="/tags/'.concat(ge,'"><mark>').concat(ge,"</mark></a>"):'<a class="chip waves-effect" href="/tags/'.concat(ge,'">').concat(ge,"</a>")}catch(e){xe.e(e)}finally{xe.f()}}(Te=document.createElement("span")).className="iconify",Te.dataset.icon="mdi:link",le.appendChild(Te),(we=document.createElement("p")).className="search-permalink",le.appendChild(we),U=0,Se=_createForOfIteratorHelper(i);try{for(Se.s();!(Ee=Se.n()).done;)He=_slicedToArray(Ee.value,2),Ie=He[0],Oe=He[1],we.innerHTML+="".concat(t.url.slice(U,Ie),"<mark>").concat(t.url.slice(Ie,Oe),"</mark>"),U=Oe}catch(e){Se.e(e)}finally{Se.f()}return we.innerHTML+=t.url.slice(U),e.next=113,W;case 113:case"end":return e.stop()}}),e,null,[[16,27,30,33],[37,70,73,76],[45,59,62,65]])})),s.s();case 11:if((u=s.n()).done){e.next=18;break}return e.delegateYield(f(),"t0",13);case 13:if("continue"!==e.t0){e.next=16;break}return e.abrupt("continue",16);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(8),s.e(e.t1);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return e.abrupt("return",!0);case 27:case"end":return e.stop()}}),e,null,[[8,20,23,26]])}var n={script:document.currentScript.getAttribute("src"),SEARCH_PAGE_SIZE:10,update:function(){for(var e=0,t=Array.from(this.results.children);e<t.length;e++){t[e].remove()}this.resultGen=r(this.indices,this.input.value);var n=this.resultGen.next();if(n.done)this.resultsBox.dataset.search=n.value?"empty":"";else{for(var a=1;a<this.SEARCH_PAGE_SIZE&&!n.done;a++)this.results.appendChild(n.value),n=this.resultGen.next();n.done?this.resultsBox.dataset.search="":(this.resultsBox.dataset.search="incomplete",this.results.appendChild(n.value))}},init:function(e){var t=this;this.input=document.querySelector("#search-input"),this.resultsBox=document.querySelector("#search-results-box"),this.results=document.querySelector("#search-results"),this.indices=[],fetch("/search.xml").then((function(e){return e.text()})).then((function(e){var r,n=_createForOfIteratorHelper((new DOMParser).parseFromString(e,"text/xml").querySelectorAll("entry"));try{for(n.s();!(r=n.n()).done;){var a=r.value,c=a.querySelector("content").textContent;t.indices.push({title:a.querySelector("title").textContent,url:a.querySelector("url").textContent,content:c,lowerContent:c.toLowerCase(),categories:Array.from(a.querySelectorAll("category")).map((function(e){return e.textContent})),tags:Array.from(a.querySelectorAll("tag")).map((function(e){return e.textContent}))})}}catch(e){n.e(e)}finally{n.f()}document.querySelector("#search-pending").remove(),t.update()}));var r="";this.input.addEventListener("keyup",(function(){t.input.value!==r&&(r=t.input.value,t.update())})),this.input.addEventListener("change",(function(){t.update()})),document.querySelector("#search-clear").addEventListener("click",(function(){t.input.value="",t.update()})),document.querySelector("#search-more").addEventListener("click",(function(){for(var e=t.resultGen.next(),r=1;r<t.SEARCH_PAGE_SIZE&&!e.done;r++)t.results.appendChild(e.value),e=t.resultGen.next();t.resultsBox.dataset.search=e.done?"":"incomplete"}))}};window.pageModules.push(n)}();